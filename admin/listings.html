<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
      <meta name="description" content="Askbootstrap" />
      <meta name="author" content="Askbootstrap" />
      <title>Osahan Eat - Online Food Ordering Website HTML Template</title>
      <!-- Favicon Icon -->
      <link rel="icon" type="image/png" href="img/favicon.png">
      <!-- Feather Icon-->
      <link href="vendor/icons/feather.css" rel="stylesheet" type="text/css">
      <!-- Fontawesome Icon-->
      <link href="vendor/fontawesome/css/fontawesome.min.css" rel="stylesheet" type="text/css">
      <!-- Bootstrap Css -->
      <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <!-- Custom Css -->
      <link href="css/styles.css" rel="stylesheet" />
      <!-- Datatables css -->
      <link href="vendor/dataTables/dataTables/css/dataTables.bootstrap4.min.css" rel="stylesheet">
   </head>
   <body class="sb-nav-fixed">
      <nav class="sb-topnav navbar navbar-expand navbar-light bg-white shadow-sm">
         <a class="navbar-brand" href="index.html"><img alt="logo" src="img/logo.png"></a>
         <button class="btn btn-link btn-sm order-1 order-lg-0" id="sidebarToggle" href="#"><i class="fas fa-bars"></i></button>
         <!-- Navbar-->
         <ul class="navbar-nav ml-auto ml-md-0">
            <!-- Nav Item - User Information -->
            <li class="nav-item dropdown no-arrow ml-1 osahan-profile-dropdown">
               <a class="nav-link dropdown-toggle pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               <img class="img-profile rounded-circle" src="img/user/1.png">
               </a>
               <!-- Dropdown - User Information -->
               <div class="dropdown-menu dropdown-menu-right shadow-sm">
                  <div class="p-3 d-flex align-items-center">
                     <div class="dropdown-list-image mr-3">
                        <img class="rounded-circle" src="img/user/1.png" alt="">
                        <div class="status-indicator bg-success"></div>
                     </div>
                     <div class="font-weight-bold">
                        <div class="text-truncate">Quản trị viên</div>
                        <div class="small text-gray-500">Quản lý hệ thống</div>
                     </div>
                  </div>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="my-profile.html"><i class="feather-edit"></i> Tài khoản của tôi</a>
                  <a class="dropdown-item" href="my-profile.html"><i class="feather-settings"></i> Cài đặt tài khoản</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="login.html" onclick="adminLogout(); return false;"><i class="feather-log-out"></i> Đăng xuất</a>
               </div>
            </li>
         </ul>
      </nav>
      <div id="layoutSidenav">
         <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
               <div class="sb-sidenav-menu">
                  <div class="nav">
                     <div class="sb-sidenav-menu-heading">Chức năng</div>
                     <a class="nav-link" href="index.html">
                        <div class="sb-nav-link-icon"><i class="feather-home"></i></div>
                        Bảng điều khiển
                     </a>
                     <a class="nav-link active" href="listings.html">
                        <div class="sb-nav-link-icon"><i class="feather-list"></i></div>
                        Quản lý nhà hàng
                     </a>
                     <a class="nav-link" href="users.html">
                        <div class="sb-nav-link-icon"><i class="feather-users"></i></div>
                        Quản lý người dùng
                     </a>
                     <a class="nav-link" href="shippers.html">
                        <div class="sb-nav-link-icon"><i class="feather-truck"></i></div>
                        Quản lý shipper
                     </a>
                     <a class="nav-link" href="permissions.html">
                        <div class="sb-nav-link-icon"><i class="feather-shield"></i></div>
                        Quản lý phân quyền
                     </a>
                  </div>
               </div>
               <div class="sb-sidenav-footer">
                  <div class="small">Đăng nhập với:</div>
                  Quản trị viên
               </div>
            </nav>
         </div>
         <div id="layoutSidenav_content">
            <main>
               <div class="container-fluid">
                  <h1 class="mt-4">Quản lý Nhà hàng</h1>
                  <ol class="breadcrumb mb-4">
                     <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                     <li class="breadcrumb-item active">Nhà hàng</li>
                  </ol>
                  <!-- Admin không được thêm nhà hàng, chỉ owner mới được thêm -->
                  <!-- <div class="row mb-3">
                     <div class="col-12">
                        <button class="btn btn-primary" data-toggle="modal" data-target="#create-restaurant-modal">
                           <i class="feather-plus-circle"></i> Thêm nhà hàng mới
                        </button>
                     </div>
                  </div> -->
                  <div class="row">
                     <div class="col-xl-12">
                        <div class="card mb-4">
                           <div class="card-header">
                              <i class="fas fa-table mr-1"></i>
                              Danh sách Nhà hàng
                           </div>
                           <div class="card-body">
                              <div class="table-responsive">
                                 <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                                    <thead>
                                       <tr class="text-uppercase">
                                          <th>Ảnh</th>
                                          <th>Tên nhà hàng</th>
                                          <th>Mô tả ngắn</th>
                                          <th>Trạng thái</th>
                                          <th>Miễn phí ship</th>
                                          <th>Đánh giá</th>
                                          <th>Hành động</th>
                                       </tr>
                                    </thead>
                                    <tbody id="restaurants-tbody">
                                       <tr>
                                          <td colspan="6" class="text-center text-muted">
                                             <i class="feather-loader spinner-border spinner-border-sm"></i> Đang tải dữ liệu...
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
               <div class="container-fluid">
                  <div class="d-flex align-items-center justify-content-between small">
                     <div class="text-muted">Copyright &copy; OSAHANEAT 2024</div>
                  </div>
               </div>
            </footer>
         </div>
      </div>

      <!-- Create Restaurant Modal -->
      <div class="modal fade" id="create-restaurant-modal" tabindex="-1" role="dialog" aria-labelledby="createRestaurantModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <h5 class="modal-title" id="createRestaurantModalLabel">Thêm nhà hàng mới</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                  <form id="create-restaurant-form">
                     <div class="form-group">
                        <label for="restaurant-title">Tên nhà hàng <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="restaurant-title" required>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-subtitle">Mô tả ngắn <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="restaurant-subtitle" required>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-description">Mô tả chi tiết</label>
                        <textarea class="form-control" id="restaurant-description" rows="3"></textarea>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-address">Địa chỉ <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="restaurant-address" required>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-open-date">Ngày mở cửa <span class="text-danger">*</span></label>
                        <input type="datetime-local" class="form-control" id="restaurant-open-date" required>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-freeship">Miễn phí ship</label>
                        <div class="form-check">
                           <input class="form-check-input" type="checkbox" id="restaurant-freeship">
                           <label class="form-check-label" for="restaurant-freeship">
                              Có miễn phí ship
                           </label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label for="restaurant-image">Ảnh nhà hàng <span class="text-danger">*</span></label>
                        <input type="file" class="form-control-file" id="restaurant-image" accept="image/*" required>
                        <small class="form-text text-muted">Chọn file ảnh cho nhà hàng</small>
                     </div>
                  </form>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                  <button type="button" class="btn btn-primary" id="create-restaurant-submit" onclick="$('#create-restaurant-form').submit();">Tạo nhà hàng</button>
               </div>
            </div>
         </div>
      </div>

      <!-- Edit Restaurant Modal -->
      <div class="modal fade" id="edit-restaurant-modal" tabindex="-1" role="dialog" aria-labelledby="editRestaurantModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
               <div class="modal-header">
                  <h5 class="modal-title" id="editRestaurantModalLabel">Chỉnh sửa nhà hàng</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
               </div>
               <div class="modal-body">
                  <form id="edit-restaurant-form">
                     <input type="hidden" id="edit-restaurant-id">
                     <div class="form-group">
                        <label for="edit-restaurant-title">Tên nhà hàng <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="edit-restaurant-title" required>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-subtitle">Mô tả ngắn <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="edit-restaurant-subtitle" required>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-description">Mô tả chi tiết</label>
                        <textarea class="form-control" id="edit-restaurant-description" rows="3"></textarea>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-address">Địa chỉ <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="edit-restaurant-address" required>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-open-date">Ngày mở cửa <span class="text-danger">*</span></label>
                        <input type="datetime-local" class="form-control" id="edit-restaurant-open-date" required>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-freeship">Miễn phí ship</label>
                        <div class="form-check">
                           <input class="form-check-input" type="checkbox" id="edit-restaurant-freeship">
                           <label class="form-check-label" for="edit-restaurant-freeship">
                              Có miễn phí ship
                           </label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label for="edit-restaurant-image">Ảnh nhà hàng</label>
                        <input type="file" class="form-control-file" id="edit-restaurant-image" accept="image/*">
                        <small class="form-text text-muted">Chọn file ảnh mới để thay đổi (để trống nếu không đổi)</small>
                        <div id="edit-restaurant-current-image" class="mt-2"></div>
                     </div>
                  </form>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                  <button type="button" class="btn btn-primary" onclick="updateRestaurant()">Cập nhật</button>
               </div>
            </div>
         </div>
      </div>

      <!-- Jquery -->
      <script src="vendor/jquery/jquery.min.js"></script>
      <!-- Fontawesome -->
      <script src="vendor/fontawesome/js/all.min.js"></script>
      <!-- Bootstrap -->
      <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <!-- Admin API Service -->
      <script src="js/api.js"></script>
      <!-- Admin JS -->
      <script src="js/admin.js"></script>
      <!-- Custom Js -->
      <script src="js/scripts.js"></script>
      <!-- Restaurants Management -->
      <script src="js/restaurants.js"></script>
      <!-- Ajax Chart Js -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
      <!-- Chart Js -->
      <script src="assets/demo/chart-area-demo.js"></script>
      <script src="assets/demo/chart-bar-demo.js"></script>
      <script src="assets/demo/chart-pie-demo.js"></script>
      <!-- Datatable Js -->
      <script src="vendor/dataTables/dataTables/js/jquery.dataTables.min.js"></script>
      <script src="vendor/dataTables/dataTables/js/dataTables.bootstrap.min.js"></script>
      <!-- Note: datatables-demo.js removed - restaurants.js will handle DataTable initialization -->
      <!-- Dropzone-->
      <script src="vendor/dropzone/dist/min/dropzone.min.js"></script>
   </body>
</html>